<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Will you be my Valentine Nono?</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  background-color: #fde4fd;
  padding-top: 40px;
  overflow-x: hidden;
  position: relative;
}

h1 {
  font-size: 2rem;
  color: #ff4d88;
  margin-bottom: 20px;
}

#image-container {
  display: flex;
  justify-content: center;
  margin-bottom: 10px;
  position: relative;
}

img {
  width: 200px;
  max-width: 80vw;
  transition: width 0.3s ease, transform 0.3s ease;
  margin-top: 20px;
  display: block;
}

#whyText, #message {
  font-size: 1rem;
  color: #cc0066;
  margin-top: 10px;
  margin-bottom: 20px;
  min-height: 24px;
}

#message {
  color: #ff3385;
  font-weight: bold;
}

#buttons {
  position: relative;
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 0;
  height: 60px;
}

button {
  font-size: 1rem;
  padding: 12px 25px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  white-space: nowrap;
  min-width: 80px;
}

#yesBtn { background-color: #ff66b2; color: white; }
#noBtn { background-color: #ccc; color: black; }

.heart {
  position: fixed;
  width: 12px;
  height: 12px;
  background-color: #ff4d88;
  transform: rotate(-45deg);
  pointer-events: none;
  z-index: 50;
  border-radius: 2px;
}

.heart::before,
.heart::after {
  content: "";
  position: absolute;
  width: 12px;
  height: 12px;
  background-color: #ff4d88;
  border-radius: 50%;
}

.heart::before { top: -6px; left: 0; }
.heart::after { left: 6px; top: 0; }

.shake { animation: shakeAnim 0.7s; }

@keyframes shakeAnim {
  0% { transform: translate(0px,0px) rotate(0deg); }
  10% { transform: translate(-15px,-15px) rotate(-10deg); }
  20% { transform: translate(15px,-10px) rotate(10deg); }
  30% { transform: translate(-15px,15px) rotate(-10deg); }
  40% { transform: translate(15px,10px) rotate(10deg); }
  50% { transform: translate(-15px,-10px) rotate(-10deg); }
  60% { transform: translate(15px,-15px) rotate(10deg); }
  70% { transform: translate(-15px,10px) rotate(-10deg); }
  80% { transform: translate(15px,15px) rotate(10deg); }
  90% { transform: translate(-15px,-10px) rotate(-10deg); }
  100% { transform: translate(0px,0px) rotate(0deg); }
}

.bounce { animation: bounceAnim 0.5s; }

@keyframes bounceAnim {
  0% { transform: scale(1); }
  25% { transform: scale(1.2); }
  50% { transform: scale(0.9); }
  75% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

#explosionContainer {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: none;
  z-index: 100;
}

#explosionContainer img {
  width: 200px;
  max-width: 90vw;
  border-radius: 20px;
  box-shadow: 0 0 30px #ff66b2;
  animation: explodeAnim 1s ease forwards;
}

@keyframes explodeAnim {
  0% { transform: scale(0.5) rotate(0deg); opacity: 0; }
  50% { transform: scale(1.5) rotate(180deg); opacity: 1; }
  100% { transform: scale(2) rotate(360deg); opacity: 1; }
}
</style>
</head>
<body>

<h1>Will you be my Valentine Nono? üíò</h1>

<div id="image-container">
  <img id="minion" src="minion.jpg" alt="Minion holding heart">
</div>

<div id="whyText"></div>
<div id="message"></div>

<div id="buttons">
  <button id="yesBtn">YES üíñ</button>
  <button id="noBtn">NO üòê</button>
</div>

<div id="explosionContainer">
  <img id="usPic" src="your-picture.PNG" alt="Us">
</div>

<!-- Sounds -->
<audio id="popSound" src="pop.mp3"></audio>
<audio id="valentineSong" src="valentine-song.m4a"></audio>

<script>
const minion = document.getElementById("minion");
const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
const message = document.getElementById("message");
const whyText = document.getElementById("whyText");
const popSound = document.getElementById("popSound");
const valentineSong = document.getElementById("valentineSong");
const explosionContainer = document.getElementById("explosionContainer");
const title = document.querySelector("h1");
const buttonsDiv = document.getElementById("buttons");
const imageContainer = document.getElementById("image-container");

const reasons = [
  "Why not? ü•∫",
  "Are you sure?? üíî",
  "Im giving you my heart though üò≠",
  "This minion is SAD now",
  "That was rude üòê",
  "Try again pls üíï"
];

let reasonIndex = 0;
let noBtnOffsetTop = 0;
const moveStep = 20;

noBtn.addEventListener("click", () => {
  const currentWidth = minion.offsetWidth;
  const newWidth = currentWidth * 1.15;
  minion.style.width = Math.min(newWidth, window.innerWidth * 0.8) + "px";

  noBtnOffsetTop += moveStep;
  const maxTop = window.innerHeight - noBtn.offsetHeight - 50;
  if (noBtnOffsetTop > maxTop) noBtnOffsetTop = maxTop;
  noBtn.style.transform = `translateY(${noBtnOffsetTop}px)`;

  whyText.textContent = reasons[reasonIndex % reasons.length];
  reasonIndex++;

  popSound.currentTime = 0;
  popSound.play();
});

let heartInterval;

yesBtn.addEventListener("click", () => {
  message.textContent = "YAY!! üíïü•∞ My Valentine!";
  whyText.textContent = "";

  document.body.classList.add('shake');
  minion.classList.add('bounce');

  // Start continuous heart popping immediately
  startHeartRain(200, 20);

  valentineSong.currentTime = 0;
  valentineSong.play();

  setTimeout(() => {
    document.body.classList.remove('shake');
    minion.classList.remove('bounce');
  }, 700);

  // Stage 1: 3 seconds - clear minion/text/buttons
  setTimeout(() => {
    title.style.display = "none";
    imageContainer.style.display = "none";
    whyText.style.display = "none";
    message.style.display = "none";
    buttonsDiv.style.display = "none";

    // Flood hearts even more
    startHeartRain(500, 25);
  }, 3000);

  // Stage 2: 6 seconds - show your picture
  setTimeout(() => {
    explosionContainer.style.display = "block";
    document.body.classList.add('shake');
    startHeartRain(300, 20); // continue heart pop-ups
    setTimeout(() => {
      document.body.classList.remove('shake');
    }, 1200);
  }, 6000);
});

// Heart pop-up function: keeps spawning hearts at random positions
function startHeartRain(count = 200, maxSize = 15) {
  // Clear existing interval if any
  if (heartInterval) clearInterval(heartInterval);

  heartInterval = setInterval(() => {
    for (let i = 0; i < count / 20; i++) {
      const heart = document.createElement("div");
      heart.classList.add("heart");
      const size = Math.random() * maxSize + 8;
      heart.style.width = size + "px";
      heart.style.height = size + "px";
      heart.style.left = Math.random() * 100 + "vw";
      heart.style.top = Math.random() * 100 + "vh";
      heart.style.backgroundColor = `hsl(${Math.random()*360}, 100%, 70%)`;
      document.body.appendChild(heart);
      // animate floating
      heart.animate([
        { transform: `translateY(0px) rotate(0deg)`, opacity: 1 },
        { transform: `translateY(-50px) rotate(${Math.random()*360}deg)`, opacity: 0 }
      ], {
        duration: 2000 + Math.random()*1000,
        easing: 'ease-out',
        fill: 'forwards'
      });
      setTimeout(() => heart.remove(), 3000);
    }
  }, 100); // spawn every 0.1s
}

window.addEventListener('resize', () => {
  const maxTop = window.innerHeight - noBtn.offsetHeight - 50;
  if (noBtnOffsetTop > maxTop) noBtnOffsetTop = maxTop;
  noBtn.style.transform = `translateY(${noBtnOffsetTop}px)`;
});
</script>
</body>
</html>
